{% extends "base.html.twig" %}

{% block body %}

    {{ include('admin/adminNav.html.twig') }}

    <h1> CLIMATE STORIES BANK ADMINISTRATION AREA </h1>

    <div class="container-fluid">
        <ul>
            <li>
                Number of registered users : <span class="count"> {{ roleEdit + roleUser }}</span>
            </li>
            <li>
                Users with access to the edition tools : <span class="count"> {{ roleEdit }} </span>
            </li>
            <li>
                Number of unactivated account : <span class="count"> {{ unactivated }} </span>
            </li>
            <li>
                Total of stories : <span class="count"> {{ totalStory }} </span>
            </li>
            <li>
                Validated and published stories : <span class="count"> {{ totalValidated[0]|join('|') }} </span>
            </li>
            <li>
                Unvalidated stories : <span class="count"> {{ totalStory - totalValidated[0]|join('|') }} </span>
            </li>
            <li>
                Average publication per user : <span class="count"> {{ totalValidated[0]|join('|')/roleEdit }} </span>
            </li>
        </ul>

        <a href="{{ path('adminDeleteUnactivated') }}" class="btn btn-warning" onclick="return confirm('Delete all accounts waiting for activation since at least 60 days ?')">
            Delete all unactivated accounts
        </a>

        <div class="trigger">
            <button class="btn btn-primary">Modify administrator login information</button>
        </div>

    </div>
    <div class="modalForm"  style="display: none">
        <i class="fa fa-times closeModal"></i>
        {{ form_start(form ,{'attr':{'id':'updateAdministrator'}}) }}
        <div class="form-group row">
            {{ form_label(form.email) }}
            {{ form_widget(form.email ,{'attr':{'class':'form-control'}}) }}
            {{ form_errors(form.email) }}
        </div>
        <div class="form-group row">
            {{ form_label(form.pswd) }}
            {{ form_widget(form.pswd ,{'attr':{'class':'form-control'}}) }}
            {{ form_errors(form.pswd) }}
        </div>
        <div class="form-group row">
            {{ form_label(form.confirmPswd) }}
            {{ form_widget(form.confirmPswd ,{'attr':{'class':'form-control'}}) }}
            {{ form_errors(form.confirmPswd) }}
        </div>
        <div class="form-group row">
            <button class="btn btn-success" type="submit">Submit</button>
        </div>
        {{ form_end(form) }}
    </div>
    <div class="modalOverlay" style="display: none"></div>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/modalForm.js') }}"></script>
    <script src="{{ asset('js/animatedCounter.js') }}"></script>
{% endblock %}