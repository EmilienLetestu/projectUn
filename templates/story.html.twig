{% extends 'base.html.twig' %}

{% block body %}

    <div id="storyTags">
        <ul class="list-inline">
            <li class="list-inline-item pull-left">
                <i class="fa fa-bookmark-o" aria-hidden="true"></i>
                {{ story.topic.type }}
            </li>
            <li class="list-inline-item">
                <i class="fa fa-user-o" aria-hidden="true"></i>
                {{ story.user.name}} {{ story.user.surname}}
            </li>
            <li class="list-inline-item pull-right">
                <i class="fa fa-globe" aria-hidden="true"></i>
                {{ story.country|country}}
            </li>
        </ul>
    </div>

    <div id="storyBody">
        <div>
            <h1>{{ story.title }}</h1>
        </div>

        <div id="abstract">
            <h2>The project in a few words</h2>
            <p>{{ story.abstract|raw }}</p>
        </div>

        <div id="plot">
            <h3>A Climate Story #{{ story.id }}</h3>
            <p>{{ story.plot|raw }}</p>
        </div>

        <div id="contact">
            <h3>About the author</h3>
            <ul class="list-inline">
                <li class="list-inline-item">
                    <i class="fa fa-user" aria-hidden="true"></i>
                    {{ story.user.fullName }}
                </li>
                <li class="list-inline-item">
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                    {{ story.contactEmail }}
                </li>
                <li class="list-inline-item">
                    <i class="fa fa-map-marker" aria-hidden="true"></i>
                    {{ story.contactPLace | default('------------') }}
                </li>
                <li class="list-inline-item">
                    <i class="fa fa-phone" aria-hidden="true"></i>
                    {{ story.contactPhone | default('------------') }}
                </li>
            </ul>
        </div>

        {% if extResources != null %}
        <div id="extResources">
            <h4>More about {{ story.title }}</h4>
            <ul class="list-inline">
                {% for url in extResources %}
                    <li class="list-inline-item">
                        <a href="{{url.href}}" title="{{ url.alt }}">Visit {{ url.alt }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

    </div>

    <div id="moreContainer">
        {% if sameTopic != null %}
        <div class="more" id="moreTopic">
            <h3>Stories about {{ story.topic.type }}</h3>
            {% for story in sameTopic|shuffle|slice(0,3) %}
                <ul class="list-unstyled">
                    <li>
                        <a href="{{ path('story',{'storyId':story.id}) }}">{{ story.title }}</a>
                    </li>
                </ul>
            {% endfor %}
        </div>
        {% endif %}

        {% if sameCountry != null %}
        <div class="more" id="moreCountry">
            <h3>Stories set in {{ story.country|country}}</h3>
            {% for story in sameCountry|shuffle|slice(0,3) %}
                <ul class="list-unstyled">
                    <li>
                        <a href="{{ path('story',{'storyId':story.id}) }}">{{ story.title }}</a>
                    </li>
                </ul>
            {% endfor %}
        </div>
        {% endif %}

        {% if sameYear != null %}
        <div class="more" id="moreYear">
            <h3>Stories started in {{ story.year}}</h3>
            {% for story in sameYear|shuffle|slice(0,3) %}
                <ul class="list-unstyled">
                    <li>
                        <a href="{{ path('story',{'storyId':story.id}) }}">{{ story.title }}</a>
                    </li>
                </ul>
            {% endfor %}
        </div>
        {% endif %}

        {% if samePatronage != null %}
        <div class="more" id="morePatronage">
            <h3>Stories supported by {{ story.patronage.organization }}</h3>
            {% for story in samePatronage|shuffle|slice(0,3) %}
                <ul class="list-unstyled">
                    <li>
                        <a href="{{ path('story',{'storyId':story.id}) }}">{{ story.title }}</a>
                    </li>
                </ul>
            {% endfor %}
        </div>
        {% endif %}
        {% if previous != null %}
         <a class="btn" href="{{ path('story',{'storyId':previous|join('|')}) }}">Previous</a>
        {% endif %}
        {% if next != null %}
            <a class="btn" href="{{ path('story',{'storyId':next|join('|')}) }}">Next</a>
        {% endif %}
    </div>

{% endblock %}